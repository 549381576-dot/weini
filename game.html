<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>贪吃蛇小游戏 - 维尼N1ckZzzAI</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🎮</text></svg>">
    <style>
        .game-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 2rem;
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: var(--bg-gradient);
            border-radius: var(--radius-lg);
            color: white;
        }

        .score {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .game-board {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            background: var(--bg-secondary);
            border: 3px solid var(--accent-color);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            overflow: hidden;
        }

        #gameCanvas {
            display: block;
            width: 100%;
            height: auto;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        }

        .game-controls {
            margin-top: 2rem;
            text-align: center;
        }

        .game-btn {
            padding: 1rem 2rem;
            background: var(--accent-gradient);
            color: white;
            border: none;
            border-radius: 2rem;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            margin: 0.5rem;
            transition: all 0.3s;
        }

        .game-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px -4px rgb(0 0 0 / 0.3);
        }

        .game-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 3rem;
            border-radius: var(--radius-lg);
            text-align: center;
            color: white;
            display: none;
        }

        .game-over.show {
            display: block;
        }

        .game-over h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .game-instructions {
            margin-top: 2rem;
            padding: 1.5rem;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            text-align: center;
        }

        .game-instructions h3 {
            margin-bottom: 1rem;
        }

        .keys {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .key {
            padding: 0.5rem 1rem;
            background: var(--bg-primary);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .game-board {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <nav class="nav">
        <div class="container">
            <div class="logo">
                <img src="images/avatar.jpg" alt="维尼N1ckZzzAI" class="logo-avatar">
                <span>维尼N1ckZzzAI</span>
            </div>
            <div class="nav-links">
                <a href="index.html">首页</a>
                <a href="photos.html">摄影</a>
                <a href="writing.html">文章</a>
                <a href="resume.html">简历</a>
                <a href="game.html" class="active">游戏</a>
                <a href="index.html#comments">留言</a>
            </div>
            <button class="theme-toggle" id="themeToggle" aria-label="切换主题">
                <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="5"></circle>
                    <line x1="12" y1="1" x2="12" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="23"></line>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                    <line x1="1" y1="12" x2="3" y2="12"></line>
                    <line x1="21" y1="12" x2="23" y2="12"></line>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                </svg>
                <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
            </button>
        </div>
    </nav>

    <main>
        <section class="hero" style="padding: 4rem 0 2rem;">
            <div class="container">
                <h1 class="section-title">🎮 贪吃蛇小游戏</h1>
                <p style="text-align: center; color: var(--text-secondary); margin-top: 1rem;">来挑战一下吧！</p>
            </div>
        </section>

        <section class="section">
            <div class="game-container">
                <div class="game-info">
                    <div>
                        <div style="font-size: 0.9rem; opacity: 0.9;">得分</div>
                        <div class="score" id="score">0</div>
                    </div>
                    <div>
                        <div style="font-size: 0.9rem; opacity: 0.9;">最高分</div>
                        <div class="score" id="highScore">0</div>
                    </div>
                </div>

                <div class="game-board">
                    <canvas id="gameCanvas" width="500" height="500"></canvas>
                    <div class="game-over" id="gameOver">
                        <h2>游戏结束！</h2>
                        <p style="font-size: 1.2rem; margin: 1rem 0;">得分: <span id="finalScore">0</span></p>
                        <button class="game-btn" onclick="restartGame()">再来一局</button>
                    </div>
                </div>

                <div class="game-controls">
                    <button class="game-btn" id="startBtn" onclick="startGame()">开始游戏</button>
                    <button class="game-btn" id="pauseBtn" onclick="togglePause()" disabled>暂停</button>
                </div>

                <div class="game-instructions">
                    <h3>🎯 游戏说明</h3>
                    <p style="color: var(--text-secondary); line-height: 1.8;">
                        使用方向键或 WASD 控制蛇的移动方向<br>
                        吃到食物可以增长身体和得分<br>
                        不要撞到墙壁或自己的身体！
                    </p>
                    <div class="keys">
                        <span class="key">↑</span>
                        <span class="key">↓</span>
                        <span class="key">←</span>
                        <span class="key">→</span>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 维尼N1ckZzzAI. All rights reserved.</p>
            <p class="footer-note">Built with ❤️ using pure HTML, CSS & JavaScript</p>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // 贪吃蛇游戏逻辑
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');
        const highScoreElement = document.getElementById('highScore');
        const gameOverElement = document.getElementById('gameOver');
        const finalScoreElement = document.getElementById('finalScore');
        const startBtn = document.getElementById('startBtn');
        const pauseBtn = document.getElementById('pauseBtn');

        const gridSize = 20;
        const tileCount = canvas.width / gridSize;

        let snake = [{x: 10, y: 10}];
        let food = {x: 15, y: 15};
        let dx = 0;
        let dy = 0;
        let score = 0;
        let highScore = localStorage.getItem('snakeHighScore') || 0;
        let gameLoop;
        let gameRunning = false;
        let gamePaused = false;

        highScoreElement.textContent = highScore;

        // 键盘控制
        document.addEventListener('keydown', changeDirection);

        function changeDirection(event) {
            const key = event.key;
            const goingUp = dy === -1;
            const goingDown = dy === 1;
            const goingRight = dx === 1;
            const goingLeft = dx === -1;

            // 阻止方向键的默认行为（滚动页面）
            if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', ' '].includes(key)) {
                event.preventDefault();
            }

            if ((key === 'ArrowLeft' || key === 'a' || key === 'A') && !goingRight) {
                dx = -1;
                dy = 0;
            }
            if ((key === 'ArrowUp' || key === 'w' || key === 'W') && !goingDown) {
                dx = 0;
                dy = -1;
            }
            if ((key === 'ArrowRight' || key === 'd' || key === 'D') && !goingLeft) {
                dx = 1;
                dy = 0;
            }
            if ((key === 'ArrowDown' || key === 's' || key === 'S') && !goingUp) {
                dx = 0;
                dy = 1;
            }
        }

        function startGame() {
            if (gameRunning) return;
            
            snake = [{x: 10, y: 10}];
            dx = 1;
            dy = 0;
            score = 0;
            scoreElement.textContent = score;
            gameOverElement.classList.remove('show');
            generateFood();
            
            gameRunning = true;
            gamePaused = false;
            startBtn.disabled = true;
            pauseBtn.disabled = false;
            
            gameLoop = setInterval(update, 100);
        }

        function togglePause() {
            if (!gameRunning) return;
            
            gamePaused = !gamePaused;
            pauseBtn.textContent = gamePaused ? '继续' : '暂停';
        }

        function update() {
            if (gamePaused) return;
            
            // 移动蛇
            const head = {x: snake[0].x + dx, y: snake[0].y + dy};
            
            // 检查碰撞
            if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount || checkCollision(head)) {
                endGame();
                return;
            }
            
            snake.unshift(head);
            
            // 检查是否吃到食物
            if (head.x === food.x && head.y === food.y) {
                score++;
                scoreElement.textContent = score;
                if (score > highScore) {
                    highScore = score;
                    highScoreElement.textContent = highScore;
                    localStorage.setItem('snakeHighScore', highScore);
                }
                generateFood();
            } else {
                snake.pop();
            }
            
            draw();
        }

        function draw() {
            // 清空画布
            ctx.fillStyle = '#1a1a2e';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // 画网格
            ctx.strokeStyle = '#ffffff0a';
            ctx.lineWidth = 0.5;
            for (let i = 0; i < tileCount; i++) {
                ctx.beginPath();
                ctx.moveTo(i * gridSize, 0);
                ctx.lineTo(i * gridSize, canvas.height);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(0, i * gridSize);
                ctx.lineTo(canvas.width, i * gridSize);
                ctx.stroke();
            }
            
            // 画蛇
            snake.forEach((segment, index) => {
                const gradient = ctx.createLinearGradient(
                    segment.x * gridSize, 
                    segment.y * gridSize,
                    segment.x * gridSize + gridSize,
                    segment.y * gridSize + gridSize
                );
                gradient.addColorStop(0, '#667eea');
                gradient.addColorStop(1, '#764ba2');
                
                ctx.fillStyle = gradient;
                ctx.fillRect(segment.x * gridSize + 1, segment.y * gridSize + 1, gridSize - 2, gridSize - 2);
                ctx.strokeStyle = '#ffffff';
                ctx.lineWidth = 1;
                ctx.strokeRect(segment.x * gridSize + 1, segment.y * gridSize + 1, gridSize - 2, gridSize - 2);
            });
            
            // 画食物
            ctx.fillStyle = '#ff6b6b';
            ctx.beginPath();
            ctx.arc(food.x * gridSize + gridSize / 2, food.y * gridSize + gridSize / 2, gridSize / 2 - 2, 0, Math.PI * 2);
            ctx.fill();
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 2;
            ctx.stroke();
        }

        function generateFood() {
            food = {
                x: Math.floor(Math.random() * tileCount),
                y: Math.floor(Math.random() * tileCount)
            };
            
            // 确保食物不在蛇身上
            if (snake.some(segment => segment.x === food.x && segment.y === food.y)) {
                generateFood();
            }
        }

        function checkCollision(head) {
            return snake.some(segment => segment.x === head.x && segment.y === head.y);
        }

        function endGame() {
            clearInterval(gameLoop);
            gameRunning = false;
            gamePaused = false;
            finalScoreElement.textContent = score;
            gameOverElement.classList.add('show');
            startBtn.disabled = false;
            pauseBtn.disabled = true;
            pauseBtn.textContent = '暂停';
        }

        function restartGame() {
            startGame();
        }

        // 初始绘制
        draw();
    </script>
</body>
</html>

